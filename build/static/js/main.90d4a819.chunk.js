(this["webpackJsonpmemories-zip"]=this["webpackJsonpmemories-zip"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),o=a.n(l),i=(a(47),a(4)),s=a(5),c=a(7),m=a(6),u=a(8),d=a(9),h=a(18);a(48);var f={signup:function(e){return fetch("/api/users/signup",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Email already taken!")})).then((function(e){return e.token}))},login:function(e){return fetch("/api/users/login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();throw new Error("Bad credentials")})).then((function(e){return e.token}))}};function p(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var g={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:p,getUserFromToken:function(){var e=p();return e?JSON.parse(atob(e.split(".")[1])).user:null},removeToken:function(){localStorage.removeItem("token")}};var E={signup:function(e){return f.signup(e).then((function(e){return g.setToken(e)}))},getUser:function(){return g.getUserFromToken()},login:function(e){return f.login(e).then((function(e){return g.setToken(e)}))},logout:function(){g.removeToken()}},v=(a(49),a(3)),b=function(e){var t=e.user?r.a.createElement("div",null,r.a.createElement(d.b,{to:"/memories",className:"NavBar-link"},"memories"),r.a.createElement(d.b,{to:"",className:"NavBar-link",onClick:e.handleLogout},"log out"),r.a.createElement("span",{className:"NavBar-welcome"},"Welcome, ",e.user.name)):r.a.createElement("div",null,r.a.createElement(d.b,{to:"/login",className:"NavBar-link"},"log in"),r.a.createElement(d.b,{to:"/signup",className:"NavBar-link"},"sign up"));return r.a.createElement("nav",null,r.a.createElement(d.b,{to:"/",className:"NavBar-link"},"memories.zip"),t)},y=a(17),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){a.props.updateMessage(""),a.setState(Object(y.a)({},e,t.target.value))},a.handleSubmit=function(e){e.preventDefault(),E.signup(a.state).then((function(){a.props.handleSignup(),a.props.history.push("/")})).catch((function(e){return a.props.updateMessage(e.message)}))},a.state={name:"",email:"",password:"",passwordConf:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isFormInvalid",value:function(){return!(this.state.name&&this.state.email&&this.state.password===this.state.passwordConf)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 offset-s3"},r.a.createElement("h2",null,"Sign Up"),r.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name",value:this.state.name,onChange:function(t){return e.handleChange("name",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:function(t){return e.handleChange("email",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange("password",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Confirm Password",value:this.state.passwordConf,onChange:function(t){return e.handleChange("passwordConf",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 text-center"},r.a.createElement("button",{className:"btn btn-default",disabled:this.isFormInvalid()},"Sign Up"),"\xa0\xa0",r.a.createElement(d.b,{to:"/"},"Cancel"))))))}}]),t}(n.Component),j=(a(98),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).updateMessage=function(e){a.setState({message:e})},a.state={message:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"SignupPage"},r.a.createElement(N,Object.assign({},this.props,{updateMessage:this.updateMessage,handleSignup:this.props.handleSignup})),r.a.createElement("p",null,this.state.message))}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),E.login(a.state).then((function(){a.props.handleLogin(),a.props.history.push("/")})).catch((function(e){return alert("Invalid Credentials!")}))},a.handleChange=function(e,t){a.setState(Object(y.a)({},e,t.target.value))},a.state={email:"",pw:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 offset-s3"},r.a.createElement("h2",null,"Log In"),r.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",value:this.state.email,onChange:function(t){return e.handleChange("email",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.pw,onChange:function(t){return e.handleChange("pw",t)}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s6 text-center"},r.a.createElement("button",{className:"btn btn-default"},"Log In"),"\xa0\xa0\xa0",r.a.createElement(d.b,{to:"/"},"Cancel"))))))}}]),t}(n.Component),O=(a(99),function(e){return r.a.createElement("div",{className:"LoginPage"},r.a.createElement(w,Object.assign({},e,{handleLogin:e.handleLogin})))}),C=(a(100),a(101),a(37)),S=a.n(C),k=function(){return r.a.createElement("header",{style:{backgroundImage:"url("+S.a+")"},className:"masthead"},r.a.createElement("div",{className:"row WelcomeHeader"},r.a.createElement("div",{className:"WelcomeHeader-div col"},r.a.createElement("h1",{className:"Welcome-title"},"Live for moments"),r.a.createElement("h1",{className:"Welcome-title"},"you can't put into"),r.a.createElement("h1",{className:"Welcome-title-words"},"WORDS"))))},I=(a(102),a(38)),x=a.n(I),B=a(39),F=a.n(B),M=a(40),T=a.n(M),D=function(){return r.a.createElement("div",{className:"WelcomeBody"},r.a.createElement("div",{className:"WelcomeBody-steps"},r.a.createElement("h2",null,"Step 1"),r.a.createElement("div",{className:"WelcomeBody-stepsInfo"},r.a.createElement("div",{className:"WelcomeBody-textdiv"},r.a.createElement(v.Icon,{large:!0},"camera_alt"),r.a.createElement("p",{className:"WelcomeBody-text"},"Capture your ",r.a.createElement("br",null)," memories")),r.a.createElement("img",{className:"WelcomeBody-img",src:x.a}))),r.a.createElement("div",{className:"WelcomeBody-steps"},r.a.createElement("h2",null,"Step 2"),r.a.createElement("div",{className:"WelcomeBody-stepsInfo"},r.a.createElement("div",{className:"WelcomeBody-textdiv"},r.a.createElement(v.Icon,{large:!0},"create_new_folder"),r.a.createElement("p",{className:"WelcomeBody-text"},"Store them on ",r.a.createElement("br",null)," memories.zip")),r.a.createElement("img",{className:"WelcomeBody-img",src:F.a}))),r.a.createElement("div",{className:"WelcomeBody-steps"},r.a.createElement("h2",null,"Step 3"),r.a.createElement("div",{className:"WelcomeBody-stepsInfo"},r.a.createElement("div",{className:"WelcomeBody-textdiv"},r.a.createElement(v.Icon,{large:!0},"sentiment_very_satisfied"),r.a.createElement("p",{className:"WelcomeBody-text"},"Enjoy!")),r.a.createElement("img",{className:"WelcomeBody-img",src:T.a}))))},W=function(e){return r.a.createElement("div",{className:"WelcomePage"},r.a.createElement(k,null),r.a.createElement(D,null))};a(103);function P(e,t){return"post"===e.toLowerCase()||"put"===e.toLowerCase()?{method:e,headers:new Headers({Authorization:"Bearer "+g.getToken(),"Content-Type":"application/json"}),body:JSON.stringify(t)}:{method:e,headers:new Headers({Authorization:"Bearer "+g.getToken()})}}var L={index:function(){return fetch("/api/memories",P("GET")).then((function(e){if(e.ok)return e.json();throw new Error("Bad credentials")}))},show:function(e){return fetch("/api/memories/"+e,P("GET")).then((function(e){if(e.ok)return e.json();throw new Error("Get memory failed")}))},create:function(e){return fetch("/api/memories",P("POST",e)).then((function(e){return e.json()}))},edit:function(e){return fetch("/api/memories/"+e,P("PUT")).then((function(e){if(e.ok)return e.json();throw new Error("Update failed")}))},delete:function(e){return fetch("/api/memories/"+e,P("DELETE"))},addImage:function(e,t){return fetch("/api/memories/"+e+"/add",P("PUT",t)).then((function(e){if(e.ok)return e.json();throw new Error("Add image failed")}))}},U=(a(104),a(105),function(e){return r.a.createElement("div",{className:"MemoryEntry"},r.a.createElement("div",{className:"MemoryEntry-header"},r.a.createElement("div",null,r.a.createElement("h3",null,e.memory._id?r.a.createElement(d.b,{to:"/memories/"+e.memory._id},r.a.createElement("span",{className:"MemoryEntry-title"},e.memory.title," - "),r.a.createElement("span",{className:"MemoryEntry-date"},e.memory.date)):null),r.a.createElement("hr",null)),r.a.createElement("h5",{className:"MemoryEntry-location"},e.memory.location)),r.a.createElement(v.Row,null,function(){for(var t=[],a=e.memory.images.length<3?e.memory.images.length:3,n=0;n<a;n++)t.push(r.a.createElement(v.Col,{s:4,key:e.memory._id+n},r.a.createElement("img",{src:e.memory.images[n],alt:"memory",style:{height:250,maxWidth:375}})));return t}()))}),A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={memories:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.index().then((function(t){return e.setState({memories:t})}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.memories.map((function(e){return r.a.createElement(U,{key:e._id,memory:e})})))}}]),t}(n.Component),_=a(23),z=a(20);a(106);var R={imgUpload:function(e,t){return console.log(t),new Promise((function(a,n){if(e.length){var r=[];e.forEach((function(e){r.push(fetch("https://api.imgur.com/3/image",{method:"POST",body:e,headers:new Headers({Authorization:"Client-ID "+t})}).then((function(e){return e.json()})).then((function(e){return e.data.link})))})),Promise.all(r).then((function(e){return a(e)}))}else a([])}))},getCID:function(){return new Promise((function(e,t){fetch("/api/imgur",{method:"GET",headers:new Headers({Authorization:"Bearer "+g.getToken()})}).then((function(t){e(t.json())}))}))}},H=a(41),J=a.n(H),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(y.a)({},e,t.target.value),(function(){console.log(a.state)}))},a.handleDateChange=function(e){var t=J()(e.target.value).format("MMM Do, YYYY");a.setState({date:t},(function(){console.log(a.state)}))},a.handleImageChange=function(e){console.log("files: ",e.target.files);var t=e.target.files,n=Object(z.a)(a.state.imageFiles);if(t)for(var r in t)t.hasOwnProperty(r)&&(console.log(r+" -> "+t[r]),n.push(t[r]));console.log(n),a.setState({imageFiles:n})},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state),R.imgUpload(a.state.imageFiles,a.state.cid).then((function(e){console.log(e);var t=a.state,n=(t.imageFiles,t.cid,Object(_.a)(t,["imageFiles","cid"]));L.create(Object.assign({},n,{images:e})).then((function(){a.props.history.push("/memories")}))}))},a.state={title:"",date:"",location:"",description:"",images:[],imageFiles:[],cid:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"isFormInvalid",value:function(){return!(this.state.title&&this.state.date)}},{key:"componentDidMount",value:function(){var e=this;R.getCID().then((function(t){var a=t.cid;e.setState({cid:a})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"CreateForm"},r.a.createElement(v.Row,null,r.a.createElement("div",{className:"col s7 offset-s3"},r.a.createElement("h2",null,"Create Memory"),r.a.createElement("form",{className:"CreateForm",onSubmit:this.handleSubmit,encType:"multipart/form-data"},r.a.createElement(v.Row,null,r.a.createElement(v.TextInput,{s:12,label:"Title - required",value:this.state.title,onChange:function(t){return e.handleChange("title",t)}})),r.a.createElement(v.Row,null,r.a.createElement(v.DatePicker,{s:12,label:"Date - required",value:this.state.date,options:{format:"mmm dd, yyyy"},onChange:function(t){e.handleDateChange({target:{value:t}})}})),r.a.createElement(v.Row,null,r.a.createElement(v.TextInput,{s:12,label:"Location",value:this.state.location,onChange:function(t){return e.handleChange("location",t)}})),r.a.createElement(v.Row,null,r.a.createElement(v.TextInput,{s:12,label:"Description",value:this.state.description,onChange:function(t){return e.handleChange("description",t)}})),r.a.createElement(v.Row,null,r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("div",{className:"btn"},r.a.createElement("span",null,"File"),r.a.createElement("input",{type:"file",onChange:function(t){return e.handleImageChange(t)},multiple:!0})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text"})))),r.a.createElement(v.Row,null,r.a.createElement("button",{className:"btn btn-default",disabled:this.isFormInvalid()},"Create Memory"))))))}}]),t}(n.Component),V=(a(108),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G,this.props))}}]),t}(n.Component)),Y=(a(109),a(110),function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.handleSubmit,encType:"multipart/form-data"},r.a.createElement("div",{className:"AddFile-inputs"},r.a.createElement("div",{className:"file-field input-field AddFile-file"},r.a.createElement("div",{className:"btn"},r.a.createElement("span",null,"File"),r.a.createElement("input",{type:"file",onChange:function(t){return e.handleImageChange(t)},multiple:!0})),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement("input",{className:"file-path validate",type:"text"}))),r.a.createElement("button",{className:"btn AddFile-save"},"Save"))))}),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggleButton=function(){a.setState({inputVisible:!a.state.inputVisible})},a.handleImageChange=function(e){console.log("files: ",e.target.files);var t=e.target.files,n=Object(z.a)(a.state.imageFiles);if(t)for(var r in t)t.hasOwnProperty(r)&&(console.log(r+" -> "+t[r]),n.push(t[r]));console.log(n),a.setState({imageFiles:n})},a.handleSubmit=function(e){e.preventDefault(),a.state.imageFiles.length&&R.getCID().then((function(e){return e.cid})).then((function(e){return R.imgUpload(a.state.imageFiles,e)})).then((function(e){L.addImage(a.state.memory._id,e).then((function(){a.props.history.push("/memories")}))}))},a.handleEdit=function(){L.edit(a.props.match.params.id)},a.handleDelete=function(){L.delete(a.props.match.params.id).then((function(){a.props.history.push("/memories")}))},a.state={memory:{images:[]},imageFiles:[],inputVisible:!1},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.show(this.props.match.params.id).then((function(t){e.setState({memory:t},(function(){return console.log(e.state.memory)}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"MemoryShow-info"},r.a.createElement("div",{className:"MemoryShow-headline"},r.a.createElement("h2",null,this.state.memory.title),r.a.createElement("div",{className:"MemoryShow-buttons"},r.a.createElement("button",{className:"btn red",onClick:this.handleDelete},"Delete"))),r.a.createElement("h4",null,this.state.memory.date," - ",this.state.memory.location),r.a.createElement("h5",null,this.state.memory.description),r.a.createElement("div",{className:"MemoryShow-AddFile"},r.a.createElement("button",{className:"btn MemoryShow-AddBtn",onClick:this.toggleButton},"Add Image"),this.state.inputVisible?r.a.createElement(Y,{handleImageChange:this.handleImageChange,handleSubmit:this.handleSubmit}):null)),r.a.createElement("div",{className:"MemoryShow-images"},this.state.memory.images.map((function(e){return r.a.createElement("img",{key:e,src:e,style:{width:400,height:300},className:"MemoryShow-img"})}))))}}]),t}(n.Component),K=(a(111),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){a.setState(Object(y.a)({},e,t.target.value),(function(){console.log(a.state)}))},a.handleImageChange=function(e){console.log("files: ",e.target.files);var t=e.target.files,n=Object(z.a)(a.state.imageFiles);if(t)for(var r in t)t.hasOwnProperty(r)&&(console.log(r+" -> "+t[r]),n.push(t[r]));console.log(n),a.setState({imageFiles:n})},a.handleSubmit=function(e){e.preventDefault(),console.log(a.state),R.imgUpload(a.state.imageFiles,a.state.cid).then((function(e){console.log(e);var t=a.state,n=(t.imageFiles,t.cid,Object(_.a)(t,["imageFiles","cid"]));L.create(Object.assign({},n,{images:e})).then((function(){a.props.history.push("/memories")}))}))},a.state={title:"",date:"",location:"",description:"",images:[],imageFiles:[],cid:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;R.getCID().then((function(t){var a=t.cid;e.setState({cid:a})}))}},{key:"render",value:function(){return r.a.createElement("h2",null,"Edit")}}]),t}(n.Component)),Q=function(e){return r.a.createElement("div",null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/memories/:id",render:function(e){return r.a.createElement(q,e)}}),r.a.createElement(h.b,{exact:!0,path:"/memories/:id/edit",render:function(e){return r.a.createElement(K,e)}})))},X=(a(112),function(e){return r.a.createElement("div",{className:"MemList-header"},r.a.createElement("h2",{className:"MemIndex-title"},"Memories"),r.a.createElement(d.b,{className:"btn new-button",to:"/memories/new"},"New"))}),Z=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={memories:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.index().then((function(t){return e.setState({memories:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/memories",render:function(){return r.a.createElement("div",null,r.a.createElement(X,null),r.a.createElement(A,{memories:e.state.memories}))}}),r.a.createElement(h.b,{exact:!0,path:"/memories/new",render:function(t){return r.a.createElement(V,Object.assign({},e.props,{memories:e.state.memories}))}}),r.a.createElement(h.b,{path:"/memories/:id",render:function(t){var a=e.state.memories.find((function(e){return e._id===t.match.params.id}));return r.a.createElement(Q,Object.assign({},e.props,{memory:a}))}})))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleSignup=function(){a.setState({user:E.getUser()})},a.handleLogin=function(){a.setState({user:E.getUser()})},a.handleLogout=function(){E.logout(),a.setState({user:null})},a.state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=E.getUser();this.setState({user:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,null,r.a.createElement("div",{className:"AppPage"},r.a.createElement(b,{user:this.state.user,handleLogout:this.handleLogout}),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(W,e)}}),r.a.createElement(h.b,{path:"/memories",render:function(e){return E.getUser()?r.a.createElement(Z,e):r.a.createElement(h.a,{to:"/login"})}}),r.a.createElement(h.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(j,Object.assign({},t,{handleSignup:e.handleSignup}))}}),r.a.createElement(h.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(O,Object.assign({},t,{handleLogin:e.handleLogin}))}})))))}}]),t}(n.Component);o.a.render(r.a.createElement($,null),document.getElementById("root"))},37:function(e,t,a){e.exports=a.p+"static/media/cover.18f9ec5f.jpg"},38:function(e,t,a){e.exports=a.p+"static/media/step1.223b7964.jpg"},39:function(e,t,a){e.exports=a.p+"static/media/step2.17dc8429.jpg"},40:function(e,t,a){e.exports=a.p+"static/media/step3.108a1a0f.jpg"},42:function(e,t,a){e.exports=a(113)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[42,1,2]]]);
//# sourceMappingURL=main.90d4a819.chunk.js.map